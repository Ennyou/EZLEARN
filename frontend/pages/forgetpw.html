<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <link rel="icon" href="../imgs/favicon.ico" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <title>忘記密碼</title>
  </head>

  <body>
    <div id="navbar"></div>
    <main
      class="flex justify-center relative"
      style="
        min-height: 80vh;
        background-image: url('../imgs/indexBg2.png'),
          url('../imgs/indexBg1.png');
        background-repeat: no-repeat, no-repeat;
        background-position: right, left;
        background-size: 500px, contain;
      "
    >
      <div class="flex justify-center items-center min-h-full">
        <div class="p-8 w-96 border rounded-lg">
          <h2 class="text-2xl font-bold mb-6 text-center text-gray-700">
            忘記密碼
          </h2>
          <hr class="border-gray-700 mb-4" />

          <form>
            <div class="mb-4">
              <label
                class="block text-gray-700 text-sm font-bold mb-2"
                for="email"
                >電子信箱</label
              >
              <input
                class="rounded-lg appearance-none border w-full py-2 px-3 text-gray-700 leading-tight"
                name="email"
                id="email"
                type="email"
                placeholder="輸入電子信箱"
              />
            </div>

            <div class="flex items-center justify-center mb-4">
              <p id="error" class="text-red-600"></p>
              <p id="correct"></p>
            </div>

            <button
              class="rounded-lg w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2"
              type="button"
              id="btn"
            >
              送出
            </button>
          </form>
        </div>
      </div>
    </main>
    <div id="footer"></div>
    <script src="../js/header-footer.js"></script>
  </body>
  <script>
    btn.onclick = function () {
      $("#error").text("");
      $("#correct").text("");
      let api = "http://10.0.104.199:8080/user/forget/" + $("#email").val();
      fetch(api, {
        method: "get",
        credentials: "include",
      })
        .then((response) => response.text())
        .then((data) => {
          if (data == "false") {
            $("#error").text("信箱尚未註冊");
          } else {
            $("#correct").text("請至郵箱收取密碼修改通知信");
          }
        });
    };
  </script>
</html>
